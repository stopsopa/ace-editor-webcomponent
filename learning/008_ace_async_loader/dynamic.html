<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>008 - Ace Editor Dynamic Demo</title>

    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />

    <style>
      :root {
        font-family: "Inter", sans-serif;
      }
      @supports (font-variation-settings: normal) {
        :root {
          font-family: "Inter var", sans-serif;
        }
      }
      body {
        max-width: 1400px;
        margin: 20px auto;
        padding: 0 20px;
        line-height: 1.6;
        background: #f5f5f5;
      }
      h1 {
        color: #333;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
      }
      h2 {
        color: #667eea;
        margin-top: 30px;
      }
      .controls {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .add-button {
        padding: 12px 24px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 5px;
        font-weight: bold;
        cursor: pointer;
        font-size: 16px;
      }
      .add-button:hover {
        background: #764ba2;
      }
      .editor-wrapper {
        background: white;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: relative;
      }
      .editor-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 2px solid #e0e0e0;
      }
      .editor-title {
        font-size: 18px;
        font-weight: bold;
        color: #667eea;
      }
      .remove-button {
        padding: 8px 16px;
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
      }
      .remove-button:hover {
        background: #c82333;
      }
      .editor-controls {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
        padding: 15px;
        background: #f9f9f9;
        border-radius: 5px;
      }
      .control-group {
        display: flex;
        flex-direction: column;
      }
      .control-group label {
        font-weight: bold;
        margin-bottom: 5px;
        color: #333;
        font-size: 14px;
      }
      .control-group select,
      .control-group input[type="checkbox"] {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }
      .select-with-buttons {
        display: flex;
        gap: 5px;
        align-items: stretch;
      }
      .select-with-buttons select {
        flex: 1;
      }
      .select-buttons {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      .select-btn {
        padding: 4px 8px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 12px;
        line-height: 1;
        font-weight: bold;
      }
      .select-btn:hover {
        background: #764ba2;
      }
      .select-btn:active {
        background: #5568d3;
      }
      .control-group input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
      }
      .checkbox-wrapper {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .editor-content {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
      }
      .column {
        display: flex;
        flex-direction: column;
      }
      .column h3 {
        margin: 0 0 10px 0;
        color: #333;
        font-size: 16px;
      }
      textarea {
        width: 100%;
        min-height: 300px;
        padding: 10px;
        font-size: 14px;
        border: 2px solid #ddd;
        border-radius: 4px;
        resize: vertical;
      }
      textarea:focus {
        outline: none;
        border-color: #667eea;
      }
      /* ace-editor {
        min-height: 300px;
      } */
      .info-box {
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        padding: 15px;
        margin: 20px 0;
        border-radius: 4px;
      }
      .info-box strong {
        color: #1976d2;
      }
      #editors-list {
        min-height: 100px;
      }
      .empty-state {
        text-align: center;
        padding: 40px;
        color: #999;
        font-style: italic;
      }
      /* Anchor link styling */
      h1,
      h2,
      h3 {
        position: relative;
      }
      .header-anchor {
        position: absolute;
        left: -30px;
        opacity: 0;
        transition: opacity 0.2s;
        color: #667eea;
        text-decoration: none;
        font-size: 0.8em;
        cursor: pointer;
        user-select: none;
      }
      h1:hover .header-anchor,
      h2:hover .header-anchor,
      h3:hover .header-anchor,
      .header-anchor:hover {
        opacity: 1;
      }
      .header-anchor:active {
        color: #28a745;
      }
      .copy-notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 15px 25px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        z-index: 10000;
        animation: slideIn 0.3s ease-out, slideOut 0.3s ease-in 2.7s;
        pointer-events: none;
      }
      @keyframes slideIn {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }
      .content-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
    </style>

    <script src="https://stopsopa.github.io/alert-webcomponent/alert-box.js"></script>

    <!-- Script to add IDs and anchor links to headers -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Function to create URL-friendly ID from header text
        function createId(text) {
          return text
            .toLowerCase()
            .replace(/[^\w\s-]/g, "") // Remove special characters
            .replace(/\s+/g, "-") // Replace spaces with hyphens
            .replace(/^-+|-+$/g, ""); // Trim hyphens from start/end
        }

        // Function to copy URL with hash to clipboard
        function copyAnchorUrl(id) {
          const url = `${window.location.origin}${window.location.pathname}#${id}`;
          navigator.clipboard
            .writeText(url)
            .then(() => {
              // Show notification
              const notification = document.createElement("div");
              notification.className = "copy-notification";
              notification.textContent = "✓ Link copied to clipboard!";
              document.body.appendChild(notification);

              // Remove notification after animation
              setTimeout(() => {
                notification.remove();
              }, 3000);
            })
            .catch((err) => {
              console.error("Failed to copy:", err);
            });
        }

        // Process all h1, h2, h3 headers
        const headers = document.querySelectorAll("h1, h2, h3");
        const usedIds = new Set();

        headers.forEach((header) => {
          // Skip if header already has an ID
          if (header.id) {
            usedIds.add(header.id);

            // Add anchor link even if ID exists
            const anchor = document.createElement("span");
            anchor.className = "header-anchor";
            anchor.textContent = "🔗";
            anchor.title = "Copy link to this section";
            anchor.addEventListener("click", (e) => {
              e.preventDefault();
              copyAnchorUrl(header.id);
            });
            header.insertBefore(anchor, header.firstChild);
            return;
          }

          // Create ID from header text
          let baseId = createId(header.textContent);
          let finalId = baseId;
          let counter = 1;

          // Ensure ID is unique
          while (usedIds.has(finalId)) {
            finalId = `${baseId}-${counter}`;
            counter++;
          }

          usedIds.add(finalId);
          header.id = finalId;

          // Add anchor link
          const anchor = document.createElement("span");
          anchor.className = "header-anchor";
          anchor.textContent = "🔗";
          anchor.title = "Copy link to this section";
          anchor.addEventListener("click", (e) => {
            e.preventDefault();
            copyAnchorUrl(finalId);
          });

          header.insertBefore(anchor, header.firstChild);
        });

        console.log("✅ Added anchor links to", headers.length, "headers");
      });
    </script>
  </head>
  <body>
    <h1>Documentation and demo for &lt;ace-editor&gt; web component</h1>

    <alert-box type="note">
      <strong>🎮 Interactive Demo:</strong> This page demonstrates real-time
      attribute updates to the <code>&lt;ace-editor&gt;</code> web component.
      Change any control and see the editor update instantly!
    </alert-box>

    <h2>ace-onload Event</h2>
    <p>
      Before we dive into dynamic controls, let 00 me introduce a powerful
      global event that's available for advanced configuration scenarios. The
      <code>'ace-onload'</code> event is not always needed for basic usage, but
      it becomes invaluable when you need to configure each editor instance
      beyond the standard attributes available on the main
      <code>&lt;ace-editor&gt;</code> tag.
    </p>
    <p>
      <strong>📡 Lifecycle Hook:</strong> This event fires once per editor when
      it's fully initialized, providing access to both the web component wrapper
      and the native Ace Editor instance. Use it to apply advanced
      configurations, attach custom event handlers, or integrate with other
      libraries that need direct editor access.
    </p>

    <ace-editor id="editor-for-logs" lang="javascript" readonly>
      <script type="module">
        // Listen for ace-onload events from ALL ace-editor components
        document.addEventListener("ace-onload", (event) => {
          // TypeScript notation showing what's available in event.detail:
          // event.detail: {
          //   component: HTMLElement,  // The <ace-editor> web component element
          //   editor: AceEditor,       // The native Ace Editor instance (same as component.getEditor())
          //   id: string               // The ID of the editor (auto-generated or user-provided)
          // }

          const log = document.getElementById("event-log");
          const timestamp = new Date().toLocaleTimeString();
          log.textContent += `[${timestamp}] ace-onload fired for #${event.detail.id}\n`;
          log.scrollTop = log.scrollHeight;
        });

        // Function to clear the event log
        window.clearEventLog = () => {
          const log = document.getElementById("event-log");
          log.textContent = "";
        };
      </script>
    </ace-editor>

    <!-- load after above id="editor-for-logs", because log event have to be mounted first -->
    <script
      src="../../ace-web-component.js"
      data-main-ace="../../noprettier/ace/ace-builds-1.15.0/src-min-noconflict/ace.js"
    ></script>

    <div class="content-card">
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        "
      >
        <h3 style="margin: 0" id="logs">Event Log</h3>
        <button
          onclick="clearEventLog()"
          style="
            padding: 8px 16px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
          "
        >
          Clear Log
        </button>
      </div>
      <pre
        id="event-log"
        style="
          background: #f8f9fa;
          padding: 15px;
          border-radius: 4px;
          max-height: 200px;
          overflow-y: auto;
          font-size: 13px;
          line-height: 1.5;
        "
      ></pre>
    </div>

    <h2>Getting Started: Loading the Web Component</h2>

    <p>
      <strong>📦 Setup:</strong> Before you can use the
      <code>&lt;ace-editor&gt;</code> tag, you need to load the web component
      script. This is a one-time setup in the <code>&lt;head&gt;</code> section
      of your HTML document.
    </p>

    <div class="content-card">
      <h3 style="margin-top: 0">Step 1: Load the Script</h3>
      <p>
        Add ONE of these <code>&lt;script&gt;</code> tag to your HTML
        <code>&lt;head&gt;</code> section:
      </p>

      <ace-editor lang="html" readonly>
        <script type="ace">
          <script
            src="https://stopsopa.github.io/ace-editor-webcomponent/ace-web-component.js"
            data-main-ace="https://cdnjs.cloudflare.com/ajax/libs/ace/1.43.3/ace.min.js"
          >&lt;/script>

          <script
            src="https://stopsopa.github.io/ace-editor-webcomponent/ace-web-component.js"
            data-main-ace="https://cdn.jsdelivr.net/npm/ace-builds@1.43.4/src-min-noconflict/ace.js"
          >&lt;/script>

          <script
            src="https://stopsopa.github.io/ace-editor-webcomponent/ace-web-component.js"
            data-main-ace="https://stopsopa.github.io/noprettier/ace/ace-builds-1.15.0/src-min-noconflict/ace.js"
          >&lt;/script>
        </script>
      </ace-editor>

      <alert-box type="note" alert="Explanation">
        <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8">
          <li>
            <code>src="../../ace-web-component.js"</code> - Loads the web
            component definition that registers the custom
            <code>&lt;ace-editor&gt;</code> element
          </li>
          <li>
            <code>data-main-ace="..."</code> - Tells the component where to find
            the Ace Editor library. This path should point to your
            <code>ace.js</code> file
          </li>
        </ul>
      </alert-box>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">Step 2: Use the &lt;ace-editor&gt; Tag</h3>
      <p>
        Once the script is loaded, you can now use the
        <code>&lt;ace-editor&gt;</code> tag anywhere in your HTML document!
      </p>

      <h4 style="color: #667eea; margin-top: 20px">
        Basic Example - JavaScript Code
      </h4>
      <p>Here's how to create a simple JavaScript editor:</p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 30px;
        "
      >
        <div>
          <h5 style="margin: 10px 0; color: #333">HTML Code:</h5>
          <ace-editor lang="html" readonly>
            <script type="ace">
              <ace-editor lang="javascript">
                <script type="ace">
                  function greet(name) {
                      console.log("Hello, " + name + "!");
                  }

                  greet("World");
                &lt;/script>
              </ace-editor>
            </script>
          </ace-editor>
        </div>
        <div>
          <h5 style="margin: 10px 0; color: #333">Live Result:</h5>
          <ace-editor lang="javascript">
            <script type="ace">
              function greet(name) {
                  console.log("Hello, " + name + "!");
              }

              greet("World");
            </script>
          </ace-editor>
        </div>
      </div>

      <h4 style="color: #667eea; margin-top: 30px">
        Example with Attributes - Python Code
      </h4>
      <p>
        You can customize the editor with attributes like and others...
        <code>theme</code> and <code>readonly</code>:
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 30px;
        "
      >
        <div>
          <h5 style="margin: 10px 0; color: #333">HTML Code:</h5>
          <ace-editor lang="html" readonly>
            <script type="ace">
              <ace-editor lang="python" theme="monokai" readonly>
                <script type="ace">
                  def factorial(n):
                    if n <= 1:
                      return 1
                    return n * factorial(n - 1)

                  print(factorial(5))
                &lt;/script>
              </ace-editor>
            </script>
          </ace-editor>
        </div>
        <div>
          <h5 style="margin: 10px 0; color: #333">Live Result:</h5>

          <ace-editor lang="python" theme="monokai" readonly>
            <script type="ace">
              def factorial(n):
                if n <= 1:
                  return 1
                return n * factorial(n - 1)

              print(factorial(5))
            </script>
          </ace-editor>
        </div>
      </div>

      <alert-box type="tip" alert="That's it">
        Once you load the script, the
        <code>&lt;ace-editor&gt;</code> tag becomes available throughout your
        entire page. You can use it as many times as you need, just like any
        other HTML element!
      </alert-box>
    </div>

    <h2>Auto-Generated IDs & Duplicate Detection</h2>
    <p>
      <strong>🆔 Understanding Editor IDs:</strong> Each
      <code>&lt;ace-editor&gt;</code> component requires a unique ID to function
      properly. The component handles IDs in two ways:
    </p>

    <div class="content-card">
      <h3 style="margin-top: 0">Example 1: Auto-Generated IDs (Recommended)</h3>
      <p>
        When you <strong>don't provide</strong> an <code>id</code> attribute,
        the component automatically generates a unique ID like
        <code>ace-editor-1</code>, <code>ace-editor-2</code>, etc. This is the
        <strong>easiest and safest approach</strong> for most cases.
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        "
      >
        <div>
          <h4 style="margin: 10px 0; color: #667eea">
            Without ID (auto-generated)
          </h4>

          <pre
            style="
              margin-top: 10px;
              background: #f8f9fa;
              padding: 10px;
              border-radius: 4px;
              font-size: 12px;
            "
          >
&lt;ace-editor lang="javascript"&gt;
  console.log("Hello, World!");
&lt;/ace-editor&gt;</pre
          >

          <button id="render1">render</button>
          <script>
            const render1 = document.getElementById("render1");
            render1.addEventListener("click", () => {
              const editor = document.createElement("ace-editor");
              editor.setAttribute("lang", "javascript");
              editor.textContent = `console.log("Hello, World!");`;
              render1.parentNode.appendChild(editor);

              const p = document.createElement("p");
              p.innerHTML = `Now see last log (at the bottom) in the <a href="#logs">Event Log</a> section above.`;
              render1.parentNode.appendChild(p);
            });
          </script>
        </div>
      </div>

      <alert-box type="tip" alert="Best Practice">
        Don't provide an ID unless you specifically need to reference the editor
        by ID. Let the component auto-generate IDs to avoid conflicts.
      </alert-box>

      <h3>Example 2: Manual IDs (Use with Caution)</h3>
      <p>
        When you <strong>do provide</strong> an <code>id</code> attribute, you
        are responsible for ensuring uniqueness.
        <strong style="color: #dc3545"
          >If you accidentally use the same ID twice, the component will throw
          an error.</strong
        >
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        "
      >
        <div>
          <h4 style="margin: 10px 0; color: #28a745">
            ✅ With Unique ID (valid)
          </h4>
          <ace-editor id="my-editor-1" lang="javascript">
            console.log("Hello, World!");
          </ace-editor>
          <pre
            style="
              margin-top: 10px;
              background: #f8f9fa;
              padding: 10px;
              border-radius: 4px;
              font-size: 12px;
            "
          >
&lt;ace-editor id="my-editor-1" lang="javascript"&gt;
  console.log("Hello, World!");
&lt;/ace-editor&gt;</pre
          >
        </div>

        <div>
          <h4 style="margin: 10px 0; color: #28a745">
            ✅ With Different ID (valid)
          </h4>
          <ace-editor id="my-editor-2" lang="python">
            print("Hello, World!")
          </ace-editor>
          <pre
            style="
              margin-top: 10px;
              background: #f8f9fa;
              padding: 10px;
              border-radius: 4px;
              font-size: 12px;
            "
          >
&lt;ace-editor id="my-editor-2" lang="python"&gt;
  print("Hello, World!")
&lt;/ace-editor&gt;</pre
          >
        </div>
      </div>

      <alert-box type="warning">
        When providing manual IDs, you must ensure each ID is unique across
        <strong>all</strong> ace-editor components on the page. Duplicate IDs
        will cause errors!
      </alert-box>

      <h3>Example 3: Duplicate ID Error</h3>
      <p style="color: #dc3545; font-weight: bold">
        ❌ The second editor below intentionally uses a DUPLICATE
        <code>id="duplicate-test"</code> to demonstrate the error handling:
      </p>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
        <div>
          <h4 style="margin: 10px 0; color: #28a745">
            ✅ First Editor (valid)
          </h4>
          <pre
            style="
              margin-top: 10px;
              background: #f8f9fa;
              padding: 10px;
              border-radius: 4px;
              font-size: 12px;
            "
          >
&lt;ace-editor id="duplicate-test" lang="javascript"&gt;
  console.log("First editor");
&lt;/ace-editor&gt;</pre
          >
          <ace-editor id="duplicate-test" lang="javascript">
            console.log("First editor");
          </ace-editor>
        </div>
        <div>
          <h4 style="margin: 10px 0; color: #dc3545">
            ❌ Second Editor (duplicate ID)
          </h4>
          <pre
            style="
              margin-top: 10px;
              background: #f8f9fa;
              padding: 10px;
              border-radius: 4px;
              font-size: 12px;
            "
          >
&lt;ace-editor id="duplicate-test" lang="javascript"&gt;
  console.log("This should fail");
&lt;/ace-editor&gt;</pre
          >
          <ace-editor id="duplicate-test" lang="javascript">
            console.log("This should fail");
          </ace-editor>
        </div>
      </div>

      <alert-box type="note" alert="How it works">
        <ul style="margin: 10px 0; padding-left: 20px">
          <li>
            <strong>No ID provided</strong> → Component generates unique ID like
            <code>ace-editor-1</code>, <code>ace-editor-2</code>, etc.
          </li>
          <li>
            <strong>Unique ID provided</strong> → Component validates it's
            unique across all ace-editors and uses it
          </li>
          <li>
            <strong>Duplicate ID detected</strong> → Component throws error and
            shows red error box instead of loading
          </li>
          <li>
            <strong>Component removed</strong> → ID is unregistered and can be
            reused on a new editor
          </li>
        </ul>
      </alert-box>
    </div>

    <h2>Dynamic Editor Controls</h2>

    <p>
      <strong>🎮 Interactive Demo:</strong> This section demonstrates real-time
      manipulation of <code>&lt;ace-editor&gt;</code> attributes. Click "Add New
      Editor" to create a fully interactive editor instance with live controls.
    </p>

    <div class="content-card">
      <h3 style="margin-top: 0">What This Demo Shows</h3>
      <p>
        Each editor you create will have
        <strong>three synchronized panels</strong>:
      </p>
      <ul style="line-height: 1.8">
        <li>
          <strong>✏️ Edit Code (Textarea)</strong> - A standard HTML textarea
          where you type your code. Changes here update the Ace Editor in
          real-time.
        </li>
        <li>
          <strong>🔥 Live Preview (Ace Editor)</strong> - The actual
          <code>&lt;ace-editor&gt;</code> web component rendering your code with
          syntax highlighting, themes, and all configured attributes applied.
        </li>
        <li>
          <strong>📝 HTML Usage Example</strong> - Shows the exact HTML markup
          needed to reproduce what you see in the "Live Preview" section. This
          panel automatically updates to reflect your current configuration
          (language, theme, readonly status, min-height settings, etc.).
        </li>
      </ul>

      <alert-box type="note" alert="Key Feature">
        The "HTML Usage Example" panel is particularly useful - it generates the
        exact
        <code>&lt;ace-editor&gt;</code> tag with all attributes you've
        configured, so you can copy-paste it directly into your own projects!
      </alert-box>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">Available Attributes</h3>
      <p>
        The <code>&lt;ace-editor&gt;</code> component supports the following
        attributes:
      </p>

      <table
        style="
          width: 100%;
          border-collapse: collapse;
          margin-top: 15px;
          font-size: 14px;
        "
      >
        <thead>
          <tr style="background: #667eea; color: white">
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Attribute
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Type
            </th>
            <th
              style="
                padding: 12px;
                text-align: left;
                border: 1px solid #ddd;
                width: 122px;
              "
            >
              Default
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Description
            </th>
          </tr>
        </thead>
        <tbody>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">id</td>
            <td style="padding: 10px; border: 1px solid #ddd">String</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >ace-editor-N</code
              >
              <br />
              <small style="color: #666">(auto-generated)</small>
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Unique identifier for the editor. Auto-generated if not provided
              (e.g., <code>ace-editor-1</code>, <code>ace-editor-2</code>). Must
              be unique across all ace-editors on the page.
            </td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">lang</td>
            <td style="padding: 10px; border: 1px solid #ddd">String</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >javascript</code
              >
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Programming language mode for syntax highlighting. Default is
              <code>javascript</code>. Other examples: <code>python</code>,
              <code>typescript</code>, <code>go</code>, <code>html</code>,
              <code>css</code>, <code>json</code>, <code>text</code> (plain
              text, no highlighting), etc.
            </td>
          </tr>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">theme</td>
            <td style="padding: 10px; border: 1px solid #ddd">String</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >idle_fingers</code
              >
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Visual theme for the editor. Default is
              <code>idle_fingers</code> (dark theme). Other popular options:
              <code>monokai</code>, <code>github</code>, <code>dracula</code>,
              <code>solarized_dark</code>, <code>solarized_light</code>,
              <code>ambiance</code>, etc.
            </td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">value</td>
            <td style="padding: 10px; border: 1px solid #ddd">String</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >""</code
              >
              <br />
              <small style="color: #666">(empty)</small>
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Initial content of the editor. Default is empty string. Can also
              be provided as text content between the opening and closing tags.
              Supports both attribute and inner content approaches.
            </td>
          </tr>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">readonly</td>
            <td style="padding: 10px; border: 1px solid #ddd">Boolean</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >false</code
              >
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Makes the editor read-only (no user editing allowed). Default is
              <code>false</code> (editable). Presence of attribute = true,
              absence = false. Example:
              <code>&lt;ace-editor readonly&gt;</code>
            </td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">
              min-height-lines
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">Number</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >none</code
              >
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Minimum height of the editor measured in number of lines. No
              minimum by default (auto-sizes to content). Example:
              <code>min-height-lines="10"</code> ensures at least 10 lines are
              visible.
            </td>
          </tr>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">min-height-px</td>
            <td style="padding: 10px; border: 1px solid #ddd">Number</td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                style="
                  background: #e8f4f8;
                  padding: 2px 6px;
                  border-radius: 3px;
                "
                >none</code
              >
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Minimum height of the editor measured in pixels. No minimum by
              default (auto-sizes to content). Example:
              <code>min-height-px="300"</code> ensures at least 300px height.
              Cannot be used with <code>min-height-lines</code> simultaneously.
            </td>
          </tr>
        </tbody>
      </table>

      <alert-box type="warning">
        The <code>min-height-lines</code> and
        <code>min-height-px</code> attributes are mutually exclusive. If both
        are provided, <code>min-height-px</code>
        takes precedence.
      </alert-box>
    </div>

    <h2>Try It: Add New Editors</h2>
    <p>
      Click the button below to dynamically create new editor instances and
      experiment with different configurations!
    </p>
    <p>
      Also you can clear section <a href="#logs">Logs</a> and see each new id
      created in new logs
    </p>

    <div class="controls">
      <button class="add-button" onclick="addEditor()">
        ➕ Add New Editor
      </button>
    </div>

    <div id="editors-list">
      <div class="empty-state">Click "Add New Editor" to get started!</div>
    </div>

    <script>
      // Code snippets for different languages
      const CODE_SNIPPETS = {
        javascript: `// JavaScript Example
function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

console.log(fibonacci(10));`,

        python: `# Python Example
def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n - 1) + fibonacci(n - 2)

print(fibonacci(10))`,

        typescript: `// TypeScript Example
function fibonacci(n: number): number {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

console.log(fibonacci(10));`,

        go: `// Go Example
package main

import "fmt"

func fibonacci(n int) int {
    if n <= 1 {
        return n
    }
    return fibonacci(n-1) + fibonacci(n-2)
}

func main() {
    fmt.Println(fibonacci(10))
}`,
      };

      // Available themes (all Ace Editor themes)
      const THEMES = [
        "ambiance",
        "chaos",
        "chrome",
        "clouds",
        "clouds_midnight",
        "cobalt",
        "crimson_editor",
        "dawn",
        "dracula",
        "dreamweaver",
        "eclipse",
        "github",
        "gob",
        "gruvbox",
        "idle_fingers",
        "iplastic",
        "katzenmilch",
        "kr_theme",
        "kuroir",
        "merbivore",
        "merbivore_soft",
        "mono_industrial",
        "monokai",
        "nord_dark",
        "pastel_on_dark",
        "solarized_dark",
        "solarized_light",
        "sqlserver",
        "terminal",
        "textmate",
        "tomorrow",
        "tomorrow_night",
        "tomorrow_night_blue",
        "tomorrow_night_bright",
        "tomorrow_night_eighties",
        "twilight",
        "vibrant_ink",
        "xcode",
      ];

      const LANGUAGES = ["javascript", "python", "typescript", "go"];

      let editorCounter = 0;

      function addEditor() {
        editorCounter++;
        const editorId = `editor-${editorCounter}`;
        const wrapperId = `wrapper-${editorCounter}`;

        // Remove empty state if it exists
        const emptyState = document.querySelector(".empty-state");
        if (emptyState) {
          emptyState.remove();
        }

        // Create wrapper
        const wrapper = document.createElement("div");
        wrapper.className = "editor-wrapper";
        wrapper.id = wrapperId;

        // Create header
        const header = document.createElement("div");
        header.className = "editor-header";

        const title = document.createElement("div");
        title.className = "editor-title";
        title.textContent = `Editor #${editorCounter}`;

        const removeBtn = document.createElement("button");
        removeBtn.className = "remove-button";
        removeBtn.textContent = "🗑️ Remove";
        removeBtn.onclick = () => removeEditor(wrapperId);

        header.appendChild(title);
        header.appendChild(removeBtn);

        // Create controls
        const controls = document.createElement("div");
        controls.className = "editor-controls";

        // Language selector
        const langGroup = document.createElement("div");
        langGroup.className = "control-group";
        langGroup.innerHTML = `
          <label for="${editorId}-lang">Language:</label>
          <div class="select-with-buttons">
            <select id="${editorId}-lang">
              ${LANGUAGES.map(
                (lang) =>
                  `<option value="${lang}">${
                    lang.charAt(0).toUpperCase() + lang.slice(1)
                  }</option>`
              ).join("")}
            </select>
            <div class="select-buttons">
              <button class="select-btn" data-select="${editorId}-lang" data-dir="up">▲</button>
              <button class="select-btn" data-select="${editorId}-lang" data-dir="down">▼</button>
            </div>
          </div>
        `;

        // Theme selector
        const themeGroup = document.createElement("div");
        themeGroup.className = "control-group";
        themeGroup.innerHTML = `
          <label for="${editorId}-theme">Theme:</label>
          <div class="select-with-buttons">
            <select id="${editorId}-theme">
              ${THEMES.map(
                (theme) =>
                  `<option value="${theme}">${theme
                    .replace(/_/g, " ")
                    .replace(/\b\w/g, (l) => l.toUpperCase())}</option>`
              ).join("")}
            </select>
            <div class="select-buttons">
              <button class="select-btn" data-select="${editorId}-theme" data-dir="up">▲</button>
              <button class="select-btn" data-select="${editorId}-theme" data-dir="down">▼</button>
            </div>
          </div>
        `;

        // Snippet selector
        const snippetGroup = document.createElement("div");
        snippetGroup.className = "control-group";
        snippetGroup.innerHTML = `
          <label for="${editorId}-snippet">Load Snippet:</label>
          <div class="select-with-buttons">
            <select id="${editorId}-snippet">
              <option value="">-- Select Snippet --</option>
              ${LANGUAGES.map(
                (lang) =>
                  `<option value="${lang}">${
                    lang.charAt(0).toUpperCase() + lang.slice(1)
                  } Example</option>`
              ).join("")}
            </select>
            <div class="select-buttons">
              <button class="select-btn" data-select="${editorId}-snippet" data-dir="up">▲</button>
              <button class="select-btn" data-select="${editorId}-snippet" data-dir="down">▼</button>
            </div>
          </div>
        `;

        // Readonly checkbox
        const readonlyGroup = document.createElement("div");
        readonlyGroup.className = "control-group";
        readonlyGroup.innerHTML = `
          <label for="${editorId}-readonly">Readonly:</label>
          <div class="checkbox-wrapper">
            <input type="checkbox" id="${editorId}-readonly">
            <span>Lock editor</span>
          </div>
        `;

        // Min-height control group
        const minHeightGroup = document.createElement("div");
        minHeightGroup.className = "control-group";
        minHeightGroup.innerHTML = `
          <label>Min Height:</label>
          <div style="display: flex; flex-direction: column; gap: 8px;">
            <div class="checkbox-wrapper">
              <input type="checkbox" id="${editorId}-enable-min-height">
              <span>Enable min height</span>
            </div>
            <div id="${editorId}-min-height-controls" style="display: none; padding-left: 10px;">
              <div style="display: flex; gap: 10px; margin-bottom: 5px;">
                <label style="display: flex; align-items: center; gap: 5px;">
                  <input type="radio" name="${editorId}-height-unit" value="lines" checked>
                  <span>Lines</span>
                </label>
                <label style="display: flex; align-items: center; gap: 5px;">
                  <input type="radio" name="${editorId}-height-unit" value="px">
                  <span>Pixels</span>
                </label>
              </div>
              <input type="number" id="${editorId}-min-height-value" value="10" min="1" style="width: 100%; padding: 5px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
          </div>
        `;

        controls.appendChild(langGroup);
        controls.appendChild(themeGroup);
        controls.appendChild(snippetGroup);
        controls.appendChild(readonlyGroup);
        controls.appendChild(minHeightGroup);

        // Create content area
        const content = document.createElement("div");
        content.className = "editor-content";

        // Left column - Textarea
        const leftCol = document.createElement("div");
        leftCol.className = "column";
        leftCol.innerHTML = `
          <h3>✏️ Edit Code (Textarea)</h3>
          <textarea id="${editorId}-textarea">${CODE_SNIPPETS.javascript}</textarea>
        `;

        // Middle column - Live Ace Editor
        const middleCol = document.createElement("div");
        middleCol.className = "column";
        middleCol.innerHTML = `
          <h3>🔥 Live Preview (Ace Editor)</h3>
          <ace-editor id="${editorId}" lang="javascript" value="${CODE_SNIPPETS.javascript}"></ace-editor>
        `;

        // Right column - HTML Usage Example
        const rightCol = document.createElement("div");
        rightCol.className = "column";
        rightCol.innerHTML = `
          <h3>📝 HTML Usage Example</h3>
          <ace-editor id="${editorId}-html-view" lang="html"></ace-editor>
        `;

        content.appendChild(leftCol);
        content.appendChild(middleCol);
        content.appendChild(rightCol);

        // Assemble wrapper
        wrapper.appendChild(header);
        wrapper.appendChild(controls);
        wrapper.appendChild(content);

        // Add to DOM
        document.getElementById("editors-list").appendChild(wrapper);

        // Get references
        const aceEditor = document.getElementById(editorId);
        const htmlViewEditor = document.getElementById(`${editorId}-html-view`);
        const textarea = document.getElementById(`${editorId}-textarea`);
        const langSelect = document.getElementById(`${editorId}-lang`);
        const themeSelect = document.getElementById(`${editorId}-theme`);
        const snippetSelect = document.getElementById(`${editorId}-snippet`);
        const readonlyCheckbox = document.getElementById(
          `${editorId}-readonly`
        );
        const enableMinHeightCheckbox = document.getElementById(
          `${editorId}-enable-min-height`
        );
        const minHeightControls = document.getElementById(
          `${editorId}-min-height-controls`
        );
        const minHeightValue = document.getElementById(
          `${editorId}-min-height-value`
        );
        const heightUnitRadios = document.getElementsByName(
          `${editorId}-height-unit`
        );

        // Function to generate HTML code representation
        function generateHtmlCode() {
          const currentLang = langSelect.value;
          const currentTheme = themeSelect.value;
          const currentValue = textarea.value;
          const isReadonly = readonlyCheckbox.checked;
          const minHeightEnabled = enableMinHeightCheckbox.checked;

          const escapedValue = currentValue
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");

          let htmlCode = `<ace-editor\n  id="${editorId}"\n  lang="${currentLang}"`;

          if (currentTheme !== "ambiance") {
            htmlCode += `\n  theme="${currentTheme}"`;
          }

          if (isReadonly) {
            htmlCode += `\n  readonly`;
          }

          if (minHeightEnabled) {
            const selectedUnit = Array.from(heightUnitRadios).find(
              (r) => r.checked
            ).value;
            const heightVal = minHeightValue.value;
            if (selectedUnit === "lines") {
              htmlCode += `\n  min-height-lines="${heightVal}"`;
            } else {
              htmlCode += `\n  min-height-px="${heightVal}"`;
            }
          }

          htmlCode += `\n>\n${escapedValue}\n</ace-editor>`;

          return htmlCode;
        }

        // Update HTML view
        function updateHtmlView() {
          if (htmlViewEditor && htmlViewEditor.setValue) {
            htmlViewEditor.setValue(generateHtmlCode());
          } else {
            // Editor not ready yet, try again after a delay
            setTimeout(updateHtmlView, 200);
          }
        }

        // Initial HTML view update (wait longer for ace-editor to initialize)
        setTimeout(updateHtmlView, 1500);

        // Setup event listeners

        // Textarea updates ace-editor value attribute
        textarea.addEventListener("input", () => {
          aceEditor.setAttribute("value", textarea.value);
          updateHtmlView();
        });

        // Language change
        langSelect.addEventListener("change", () => {
          aceEditor.setAttribute("lang", langSelect.value);
          updateHtmlView();
        });

        // Theme change
        themeSelect.addEventListener("change", () => {
          aceEditor.setAttribute("theme", themeSelect.value);
          updateHtmlView();
        });

        // Snippet loader - function to load snippet
        const loadSnippet = () => {
          if (snippetSelect.value) {
            const snippet = CODE_SNIPPETS[snippetSelect.value];
            textarea.value = snippet;
            aceEditor.setAttribute("value", snippet);
            updateHtmlView();
          }
        };

        // Load on change (clicking an option)
        snippetSelect.addEventListener("change", loadSnippet);

        // Load on keydown (arrow keys)
        snippetSelect.addEventListener("keydown", (e) => {
          if (e.key === "ArrowUp" || e.key === "ArrowDown") {
            // Wait for the select value to update, then load
            setTimeout(loadSnippet, 0);
          }
        });

        // Readonly toggle
        readonlyCheckbox.addEventListener("change", () => {
          if (readonlyCheckbox.checked) {
            aceEditor.setAttribute("readonly", "");
          } else {
            aceEditor.removeAttribute("readonly");
          }
          updateHtmlView();
        });

        // Function to apply min-height to editor
        const applyMinHeight = () => {
          if (enableMinHeightCheckbox.checked) {
            const selectedUnit = Array.from(heightUnitRadios).find(
              (r) => r.checked
            ).value;
            const heightVal = minHeightValue.value;

            // Remove both attributes first
            aceEditor.removeAttribute("min-height-px");
            aceEditor.removeAttribute("min-height-lines");

            // Apply the selected one
            if (selectedUnit === "lines") {
              aceEditor.setAttribute("min-height-lines", heightVal);
            } else {
              aceEditor.setAttribute("min-height-px", heightVal);
            }
          } else {
            // Remove both attributes when disabled
            aceEditor.removeAttribute("min-height-px");
            aceEditor.removeAttribute("min-height-lines");
          }
          updateHtmlView();
        };

        // Min-height enable/disable toggle
        enableMinHeightCheckbox.addEventListener("change", () => {
          if (enableMinHeightCheckbox.checked) {
            minHeightControls.style.display = "block";
          } else {
            minHeightControls.style.display = "none";
          }
          applyMinHeight();
        });

        // Min-height unit radio change
        heightUnitRadios.forEach((radio) => {
          radio.addEventListener("change", applyMinHeight);
        });

        // Min-height value input change
        minHeightValue.addEventListener("input", applyMinHeight);

        // Handle up/down buttons for all selects
        wrapper.addEventListener("click", (e) => {
          if (e.target.classList.contains("select-btn")) {
            const selectId = e.target.getAttribute("data-select");
            const direction = e.target.getAttribute("data-dir");
            const selectElement = document.getElementById(selectId);

            if (selectElement) {
              const currentIndex = selectElement.selectedIndex;
              let newIndex = currentIndex;

              if (direction === "up" && currentIndex > 0) {
                newIndex = currentIndex - 1;
              } else if (
                direction === "down" &&
                currentIndex < selectElement.options.length - 1
              ) {
                newIndex = currentIndex + 1;
              }

              if (newIndex !== currentIndex) {
                selectElement.selectedIndex = newIndex;
                // Trigger change event
                const changeEvent = new Event("change", { bubbles: true });
                selectElement.dispatchEvent(changeEvent);
              }
            }
          }
        });

        console.log(`✅ Added editor #${editorCounter}`);
      }

      function removeEditor(wrapperId) {
        const wrapper = document.getElementById(wrapperId);
        if (wrapper) {
          wrapper.remove();
          console.log(`🗑️ Removed ${wrapperId}`);

          // Show empty state if no editors left
          const editorsList = document.getElementById("editors-list");
          if (editorsList.children.length === 0) {
            const emptyState = document.createElement("div");
            emptyState.className = "empty-state";
            emptyState.textContent = 'Click "Add New Editor" to get started!';
            editorsList.appendChild(emptyState);
          }
        }
      }

      // Add one editor by default
      window.addEventListener("load", () => {
        console.log("✅ Dynamic demo loaded!");
        console.log("💡 Try changing the controls to see live updates!");
        addEditor();
      });
    </script>

    <h2>Two Ways to Define Initial Content</h2>

    <p>
      <strong>📝 Content Syntax:</strong> The
      <code>&lt;ace-editor&gt;</code> component supports two different syntaxes
      for providing initial code content. Both produce the same result, but the
      second method is recommended for better tooling compatibility.
    </p>

    <div class="content-card">
      <h3 style="margin-top: 0">Method 1: Plain Text Content (Simple)</h3>
      <p>
        You can place code directly between the opening and closing
        <code>&lt;ace-editor&gt;</code> tags as plain text content:
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin: 20px 0;
        "
      >
        <div>
          <h4 style="margin: 10px 0; color: #333">HTML Code:</h4>
          <ace-editor lang="html" readonly>
            <script type="ace">
              <ace-editor lang="javascript">
                  // JavaScript Example
                  function fibonacci(n) {
                      if (n <= 1) return n;
                      return fibonacci(n - 1) + fibonacci(n - 2);
                  }
              </ace-editor>
            </script>
          </ace-editor>
        </div>
        <div>
          <h4 style="margin: 10px 0; color: #333">Live Result:</h4>
          <ace-editor lang="javascript">
            // JavaScript Example function fibonacci(n) { if (n <= 1) return n;
            return fibonacci(n - 1) + fibonacci(n - 2); }
          </ace-editor>
        </div>
      </div>

      <alert-box type="warning">
        While this method is simple, code formatting tools like
        <strong>Prettier</strong> may reformat your code, potentially destroying
        your carefully crafted indentation and layout.
      </alert-box>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">
        Method 2: Using &lt;script type="ace"&gt; (Recommended)
      </h3>
      <p>
        Wrap your code in a <code>&lt;script type="ace"&gt;</code> tag to
        protect it from code formatters:
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin: 20px 0;
        "
      >
        <div>
          <h4 style="margin: 10px 0; color: #333">HTML Code:</h4>
          <ace-editor lang="html" readonly min-height-lines="10">
            <script type="ace">
              <ace-editor lang="javascript">
                  <script type="ace">
                      // JavaScript Example
                      function fibonacci(n) {
                          if (n <= 1) return n;
                          return fibonacci(n - 1) + fibonacci(n - 2);
                      }
                  &lt;/script>
              </ace-editor>
            </script>
          </ace-editor>
        </div>
        <div>
          <h4 style="margin: 10px 0; color: #333">Live Result:</h4>
          <ace-editor lang="javascript">
            <script type="ace">
              // JavaScript Example
              function fibonacci(n) {
                  if (n <= 1) return n;
                  return fibonacci(n - 1) + fibonacci(n - 2);
              }
            </script>
          </ace-editor>
        </div>
      </div>

      <alert-box type="tip" alert="Recommended">
        The
        <code>&lt;script type="ace"&gt;</code> syntax prevents Prettier and
        other formatting tools from modifying your code. The
        <code>type="ace"</code> attribute tells these tools to ignore the
        content, preserving your exact formatting and indentation.
      </alert-box>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">Comparison Summary</h3>

      <table
        style="
          width: 100%;
          border-collapse: collapse;
          margin-top: 15px;
          font-size: 14px;
        "
      >
        <thead>
          <tr style="background: #667eea; color: white">
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Aspect
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Plain Text Content
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              &lt;script type="ace"&gt;
            </th>
          </tr>
        </thead>
        <tbody>
          <tr style="background: #f9f9f9">
            <td
              style="padding: 10px; border: 1px solid #ddd; font-weight: bold"
            >
              Syntax
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code>&lt;ace-editor&gt;code&lt;/ace-editor&gt;</code>
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              <code
                >&lt;ace-editor&gt;&lt;script
                type="ace"&gt;code&lt;/script&gt;&lt;/ace-editor&gt;</code
              >
            </td>
          </tr>
          <tr>
            <td
              style="padding: 10px; border: 1px solid #ddd; font-weight: bold"
            >
              Prettier-Safe
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ❌ No - may be reformatted
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #28a745">
              ✅ Yes - formatting preserved
            </td>
          </tr>
          <tr style="background: #f9f9f9">
            <td
              style="padding: 10px; border: 1px solid #ddd; font-weight: bold"
            >
              Simplicity
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #28a745">
              ✅ Simpler
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Slightly more verbose
            </td>
          </tr>
          <tr>
            <td
              style="padding: 10px; border: 1px solid #ddd; font-weight: bold"
            >
              Recommendation
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Use for quick demos/testing
            </td>
            <td
              style="
                padding: 10px;
                border: 1px solid #ddd;
                background: #d4edda;
                font-weight: bold;
              "
            >
              ⭐ Use in production code
            </td>
          </tr>
        </tbody>
      </table>

      <alert-box type="tip">
        Both methods produce identical results at runtime. The
        <code>&lt;script type="ace"&gt;</code> method is purely for better
        development experience when working with code formatting tools.
      </alert-box>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">
        Method 3: Programmatic Control with JavaScript
      </h3>
      <p>
        For dynamic applications, you can control the editor content, theme, and
        language programmatically using JavaScript. The
        <code>value</code> attribute can also be used to set initial content,
        and it will override content from Methods 1 or 2.
      </p>

      <alert-box type="important">
        The <code>value</code> attribute takes precedence over plain text
        content or <code>&lt;script type="ace"&gt;</code>. You can initialize
        with Methods 1 or 2, then override programmatically using
        <code>value</code> or the <code>.setValue()</code> method.
      </alert-box>

      <h4 style="color: #667eea; margin-top: 20px">
        Interactive Example: Programmatic Control
      </h4>
      <p>
        Click the buttons below to change the editor's content, language, and
        theme dynamically:
      </p>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin: 20px 0;
        "
      >
        <div>
          <h5 style="margin: 10px 0; color: #333">Control Buttons:</h5>
          <div
            style="
              display: flex;
              flex-direction: column;
              gap: 10px;
              margin-bottom: 15px;
            "
          >
            <button
              id="btn-js-code"
              style="
                padding: 10px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
              "
            >
              📝 Load JavaScript Code
            </button>
            <button
              id="btn-python-code"
              style="
                padding: 10px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
              "
            >
              🐍 Load Python Code
            </button>
            <button
              id="btn-change-theme"
              style="
                padding: 10px;
                background: #28a745;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
              "
            >
              🎨 Change Theme to Monokai
            </button>
            <button
              id="btn-reset"
              style="
                padding: 10px;
                background: #dc3545;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-weight: bold;
              "
            >
              🔄 Reset to Original
            </button>
          </div>

          <h5 style="margin: 10px 0; color: #333">JavaScript Code:</h5>
          <ace-editor lang="javascript" readonly min-height-lines="25">
            <script type="ace">
              // Get reference to the editor
              const editor = document.getElementById('programmatic-demo');

              // Button 1: Load JavaScript code
              document.getElementById('btn-js-code').addEventListener('click', () => {
                editor.setAttribute('lang', 'javascript');
                editor.setAttribute('value', `// JavaScript Example
              function quickSort(arr) {
                if (arr.length <= 1) return arr;
                const pivot = arr[arr.length - 1];
                const left = arr.filter((x, i) => x <= pivot && i < arr.length - 1);
                const right = arr.filter(x => x > pivot);
                return [...quickSort(left), pivot, ...quickSort(right)];
              }`);
              });

              // Button 2: Load Python code
              document.getElementById('btn-python-code').addEventListener('click', () => {
                editor.setAttribute('lang', 'python');
                editor.setAttribute('value', `# Python Example
              def bubble_sort(arr):
                  n = len(arr)
                  for i in range(n):
                      for j in range(0, n - i - 1):
                          if arr[j] > arr[j + 1]:
                              arr[j], arr[j + 1] = arr[j + 1], arr[j]
                  return arr`);

                // Alternative methods to set content (all work the same):
                // Method 1: setAttribute (shown above)
                // Method 2: Property assignment
                // editor.value = "your code here";
                // Method 3: setValue() method
                // editor.setValue("your code here");
              });

              // Button 3: Change theme
              document.getElementById('btn-change-theme').addEventListener('click', () => {
                editor.setAttribute('theme', 'monokai');
              });

              // Button 4: Reset
              document.getElementById('btn-reset').addEventListener('click', () => {
                editor.setAttribute('lang', 'javascript');
                editor.setAttribute('theme', 'idle_fingers');
                editor.setAttribute('value', '// Original content\nconsole.log("Hello, World!");');
              });
            </script>
          </ace-editor>
        </div>

        <div>
          <h5 style="margin: 10px 0; color: #333">Initial HTML Code:</h5>
          <ace-editor lang="html" readonly min-height-lines="7">
            <script type="ace">
              <ace-editor id="programmatic-demo" lang="javascript">
                  <script type="ace">
                      // Original content
                      console.log("Hello, World!");
                  &lt;/script>
              </ace-editor>
            </script>
          </ace-editor>

          <h5 style="margin: 20px 0 10px 0; color: #333">
            Live Editor (Try It!):
          </h5>
          <ace-editor id="programmatic-demo" lang="javascript">
            <script type="ace">
              // Original content
              console.log("Hello, World!");
            </script>
          </ace-editor>
        </div>
      </div>

      <script>
        // Get reference to the editor
        const editor = document.getElementById("programmatic-demo");

        // Button 1: Load JavaScript code
        document.getElementById("btn-js-code").addEventListener("click", () => {
          editor.setAttribute("lang", "javascript");
          editor.setAttribute(
            "value",
            `// JavaScript Example
function quickSort(arr) {
  if (arr.length <= 1) return arr;
  const pivot = arr[arr.length - 1];
  const left = arr.filter((x, i) => x <= pivot && i < arr.length - 1);
  const right = arr.filter(x => x > pivot);
  return [...quickSort(left), pivot, ...quickSort(right)];
}`
          );
        });

        // Button 2: Load Python code
        document
          .getElementById("btn-python-code")
          .addEventListener("click", () => {
            editor.setAttribute("lang", "python");
            editor.setAttribute(
              "value",
              `# Python Example
def bubble_sort(arr):
    n = len(arr)
    for i in range(n):
        for j in range(0, n - i - 1):
            if arr[j] > arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
    return arr`
            );
          });

        // Button 3: Change theme
        document
          .getElementById("btn-change-theme")
          .addEventListener("click", () => {
            editor.setAttribute("theme", "monokai");
          });

        // Button 4: Reset
        document.getElementById("btn-reset").addEventListener("click", () => {
          editor.setAttribute("lang", "javascript");
          editor.setAttribute("theme", "idle_fingers");
          editor.setAttribute(
            "value",
            '// Original content\nconsole.log("Hello, World!");'
          );
        });
      </script>

      <alert-box type="tip" alert="Key Takeaway">
        Use
        <code>setAttribute('value', newCode)</code>,
        <code>setAttribute('lang', newLanguage)</code>, and
        <code>setAttribute('theme', newTheme)</code> to dynamically control the
        editor. This is essential for building interactive applications where
        content changes based on user actions or data fetching.
      </alert-box>
    </div>

    <h2>Code Execution: Displaying AND Running Code</h2>

    <p>
      <strong>💻 Dual Purpose:</strong> The
      <code>&lt;ace-editor&gt;</code> component is primarily designed for
      <strong>presenting code</strong> with syntax highlighting. However, in
      many JavaScript scenarios, we want to both <strong>display</strong> the
      code <em>and</em> <strong>execute</strong> it. To avoid code duplication,
      the component provides built-in execution capabilities.
    </p>

    <div class="content-card">
      <h3 style="margin-top: 0">Two Approaches to Code Execution</h3>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin: 20px 0;
        "
      >
        <div style="padding: 15px; background: #e3f2fd; border-radius: 4px">
          <h4 style="margin-top: 0; color: #1976d2">
            Approach 1: data-eval Attribute
          </h4>
          <p style="margin: 0">
            Add <code>data-eval</code> or <code>data-eval="module"</code> to the
            <code>&lt;ace-editor&gt;</code> tag. Code executes
            <strong>after</strong> the editor is fully initialized.
          </p>
        </div>

        <div style="padding: 15px; background: #fff3cd; border-radius: 4px">
          <h4 style="margin-top: 0; color: #856404">
            Approach 2: Executable &lt;script&gt; Tag
          </h4>
          <p style="margin: 0">
            Use <code>&lt;script&gt;</code> with executable type attribute
            inside the component. Code executes
            <strong>immediately</strong> when the browser parses it.
          </p>
        </div>
      </div>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">Approach 1: Using data-eval Attribute</h3>

      <h4 style="color: #667eea">
        Example 1.1: data-eval (Regular Script Mode)
      </h4>
      <p>
        Using <code>data-eval</code> alone creates a regular
        <code>&lt;script&gt;</code> tag in the background, executing code in
        <strong>non-ESM mode</strong> (classic script context).
      </p>

      <ace-editor lang="html" readonly min-height-lines="7">
        <script type="ace">
          <ace-editor lang="javascript" data-eval>
              <script type="ace">
                  // This runs in regular (non-ESM) script mode
                  console.log("Hello from data-eval!");
                  alert("data-eval executed!");
              &lt;/script>
          </ace-editor>
        </script>
      </ace-editor>

      <button
        id="demo1-1-btn"
        style="
          margin: 10px 0;
          padding: 10px 20px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        ▶️ Run Example 1.1
      </button>
      <div id="demo1-1-container"></div>

      <script>
        document.getElementById("demo1-1-btn").addEventListener("click", () => {
          const container = document.getElementById("demo1-1-container");
          container.innerHTML = "";
          const editor = document.createElement("ace-editor");
          editor.setAttribute("lang", "javascript");
          editor.setAttribute("data-eval", "");
          editor.innerHTML = `<script type="ace">
// This runs in regular (non-ESM) script mode
console.log("Hello from data-eval!");
alert("data-eval executed!");
<\/script>`;
          container.appendChild(editor);
        });
      </script>

      <h4 style="color: #667eea">Example 1.2: data-eval="module" (ESM Mode)</h4>
      <p>
        Using <code>data-eval="module"</code> creates a
        <code>&lt;script type="module"&gt;</code> tag, executing code in
        <strong>ESM mode</strong> with import/export support.
      </p>

      <ace-editor lang="html" readonly>
        <script type="ace">
          <ace-editor lang="javascript" data-eval="module">
              <script type="ace">
                  // This runs in ESM (module) mode
                  console.log("Hello from data-eval module!");
                  // You can use import statements here
                  const message = "ESM mode active!";
                  alert(message);
              &lt;/script>
          </ace-editor>
        </script>
      </ace-editor>

      <button
        id="demo1-2-btn"
        style="
          margin: 10px 0;
          padding: 10px 20px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        ▶️ Run Example 1.2
      </button>
      <div id="demo1-2-container"></div>

      <script>
        document.getElementById("demo1-2-btn").addEventListener("click", () => {
          const container = document.getElementById("demo1-2-container");
          container.innerHTML = "";
          const editor = document.createElement("ace-editor");
          editor.setAttribute("lang", "javascript");
          editor.setAttribute("data-eval", "module");
          editor.innerHTML = `<script type="ace">
// This runs in ESM (module) mode
console.log("Hello from data-eval module!");
// You can use import statements here
const message = "ESM mode active!";
alert(message);
<\/script>`;
          container.appendChild(editor);
        });
      </script>

      <h4 style="color: #667eea">
        Example 1.3: Interacting with the Editor Instance
      </h4>
      <p>
        With <code>data-eval</code>, code executes
        <strong>after the editor is fully initialized</strong>, allowing you to
        interact with the editor instance programmatically.
      </p>

      <ace-editor lang="html" readonly min-height-lines="10">
        <script type="ace">
          <ace-editor id="self-modifying-editor" lang="javascript" data-eval="module">
              <script type="ace">
                  // Access the editor instance that contains this code
                  const editor = document.getElementById('self-modifying-editor');

                  setTimeout(() => {
                      editor.setAttribute('theme', 'monokai');
                      alert('Theme changed to monokai!');
                  }, 1000);
              &lt;/script>
          </ace-editor>
        </script>
      </ace-editor>

      <button
        id="demo1-3-btn"
        style="
          margin: 10px 0;
          padding: 10px 20px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        ▶️ Run Example 1.3
      </button>
      <div id="demo1-3-container"></div>

      <script>
        document.getElementById("demo1-3-btn").addEventListener("click", () => {
          const container = document.getElementById("demo1-3-container");
          container.innerHTML = "";
          const editor = document.createElement("ace-editor");
          editor.id = "self-modifying-editor-instance";
          editor.setAttribute("lang", "javascript");
          editor.setAttribute("data-eval", "module");
          editor.innerHTML = `<script type="ace">
// Access the editor instance that contains this code
const editor = document.getElementById('self-modifying-editor-instance');

setTimeout(() => {
    editor.setAttribute('theme', 'monokai');
    alert('Theme changed to monokai!');
}, 1000);
<\/script>`;
          container.appendChild(editor);
        });
      </script>
    </div>

    <div class="content-card">
      <h3 style="margin-top: 0">
        Approach 2: Using Executable &lt;script&gt; Tags
      </h3>
      <p>
        Instead of using <code>data-eval</code>, you can use
        <code>&lt;script&gt;</code> tags with executable type attributes. These
        execute <strong>immediately</strong> when the browser's HTML parser
        encounters them.
      </p>

      <h4 style="color: #667eea">
        Example 2.1: &lt;script type="text/javascript"&gt;
      </h4>
      <p>Standard JavaScript execution (non-ESM mode):</p>

      <ace-editor lang="html" readonly>
        <script type="ace">
          <ace-editor lang="javascript">
              <script type="text/javascript">
                  // Executes immediately in non-ESM mode
                  console.log("Executing via type='text/javascript'");
                  alert("Script with type='text/javascript' executed!");
              &lt;/script>
          </ace-editor>
        </script>
      </ace-editor>

      <button
        id="demo2-1-btn"
        style="
          margin: 10px 0;
          padding: 10px 20px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        ▶️ Run Example 2.1
      </button>
      <div id="demo2-1-container"></div>

      <script>
        document.getElementById("demo2-1-btn").addEventListener("click", () => {
          const container = document.getElementById("demo2-1-container");
          container.innerHTML = "";
          const editor = document.createElement("ace-editor");
          editor.setAttribute("lang", "javascript");
          editor.innerHTML = `<script type="text/javascript">
// Executes immediately in non-ESM mode
console.log("Executing via type='text/javascript'");
alert("Script with type='text/javascript' executed!");
<\/script>`;
          container.appendChild(editor);
        });
      </script>

      <h4 style="color: #667eea">
        Example 2.2: &lt;script type="application/javascript"&gt;
      </h4>
      <p>Alternative MIME type for JavaScript (also non-ESM mode):</p>

      <ace-editor lang="html" readonly>
        <script type="ace">
          <ace-editor lang="javascript">
              <script type="application/javascript">
                  // Executes immediately in non-ESM mode
                  console.log("Executing via type='application/javascript'");
                  alert("Script with type='application/javascript' executed!");
              &lt;/script>
          </ace-editor>
        </script>
      </ace-editor>

      <button
        id="demo2-2-btn"
        style="
          margin: 10px 0;
          padding: 10px 20px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        ▶️ Run Example 2.2
      </button>
      <div id="demo2-2-container"></div>

      <script>
        document.getElementById("demo2-2-btn").addEventListener("click", () => {
          const container = document.getElementById("demo2-2-container");
          container.innerHTML = "";
          const editor = document.createElement("ace-editor");
          editor.setAttribute("lang", "javascript");
          editor.innerHTML = `<script type="application/javascript">
// Executes immediately in non-ESM mode
console.log("Executing via type='application/javascript'");
alert("Script with type='application/javascript' executed!");
<\/script>`;
          container.appendChild(editor);
        });
      </script>

      <h4 style="color: #667eea">Example 2.3: &lt;script type="module"&gt;</h4>
      <p>ESM (ECMAScript Module) execution with import/export support:</p>

      <ace-editor lang="html" readonly>
        <script type="ace">
          <ace-editor lang="javascript">
              <script type="module">
                  // Executes immediately in ESM mode
                  console.log("Executing via type='module'");
                  const greeting = "Hello from ESM!";
                  alert(greeting);
              &lt;/script>
          </ace-editor>
        </script>
      </ace-editor>

      <button
        id="demo2-3-btn"
        style="
          margin: 10px 0;
          padding: 10px 20px;
          background: #667eea;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        ▶️ Run Example 2.3
      </button>

      <alert-box type="warning">
        I guess you could use both data-eval and &lt;script
        type="text/javascript"&gt; then you would end up with having that code
        being executed twice but ... probably you don't need to do that :)
      </alert-box>
    </div>
    <div id="demo2-3-container"></div>

    <script>
      document.getElementById("demo2-3-btn").addEventListener("click", () => {
        const container = document.getElementById("demo2-3-container");
        container.innerHTML = "";
        const editor = document.createElement("ace-editor");
        editor.setAttribute("lang", "javascript");
        editor.innerHTML = `<script type="module">
// Executes immediately in ESM mode
console.log("Executing via type='module'");
const greeting = "Hello from ESM!";
alert(greeting);
<\/script>`;
        container.appendChild(editor);
      });
    </script>

    <div class="content-card">
      <h3 style="margin-top: 0">⚡ Key Difference: Execution Timing</h3>

      <table
        style="
          width: 100%;
          border-collapse: collapse;
          margin-top: 15px;
          font-size: 14px;
        "
      >
        <thead>
          <tr style="background: #667eea; color: white">
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Method
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Execution Timing
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Can Access Editor Instance?
            </th>
            <th style="padding: 12px; text-align: left; border: 1px solid #ddd">
              Use Case
            </th>
          </tr>
        </thead>
        <tbody>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">data-eval</td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #28a745">
              ✅ <strong>After</strong> editor initialization (delayed)
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #28a745">
              ✅ Yes - editor is fully ready
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Interacting with the editor instance, modifying editor properties
            </td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">
              data-eval="module"
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #28a745">
              ✅ <strong>After</strong> editor initialization (delayed)
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #28a745">
              ✅ Yes - editor is fully ready
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Same as above, but with ESM support (import/export)
            </td>
          </tr>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">
              &lt;script type="text/javascript"&gt;
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ⚠️ <strong>Immediately</strong> during HTML parsing (early)
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ❌ No - editor not initialized yet
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Simple alerts, console logs, standalone operations
            </td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">
              &lt;script type="application/javascript"&gt;
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ⚠️ <strong>Immediately</strong> during HTML parsing (early)
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ❌ No - editor not initialized yet
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              Alternative MIME type, same behavior as text/javascript
            </td>
          </tr>
          <tr style="background: #f9f9f9">
            <td style="padding: 10px; border: 1px solid #ddd">
              &lt;script type="module"&gt;
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ⚠️ <strong>Immediately</strong> during HTML parsing (early)
            </td>
            <td style="padding: 10px; border: 1px solid #ddd; color: #dc3545">
              ❌ No - editor not initialized yet
            </td>
            <td style="padding: 10px; border: 1px solid #ddd">
              ESM imports/exports, but can't access editor instance
            </td>
          </tr>
        </tbody>
      </table>

      <alert-box type="important">
        <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.8">
          <li>
            <strong>Use data-eval</strong> when you need to interact with the
            editor instance (change theme, modify content, access the Ace Editor
            API). The code runs <strong>after</strong> the editor is fully
            initialized.
          </li>
          <li>
            <strong>Use executable &lt;script&gt; tags</strong> when you need
            immediate execution during HTML parsing. This is useful for simple
            demonstrations, but the editor instance won't be accessible yet
            (which may be too early for some use cases).
          </li>
        </ul>
      </alert-box>
    </div>

    <h2>onChange - Ace Editor Web Component</h2>
    <p>
      <strong>✅ Behavior:</strong> Just like native textarea, programmatic
      value changes (via <code>.value = "..."</code> or
      <code>.setValue(...)</code>) do NOT fire 'input' event. Only user
      typing/editing triggers the 'input' event.
    </p>

    <style>
      .onchange-demo {
        display: flex;
        gap: 20px;
        margin: 20px 0;
      }
      .onchange-demo > div {
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      .onchange-demo h3 {
        margin: 0 0 10px 0;
        color: #333;
      }
      #onchange-output {
        flex: 1;
        min-height: 300px;
      }
    </style>

    <div class="onchange-demo">
      <div>
        <h3>📝 Editable Code</h3>
        <ace-editor id="editor-onchange" lang="javascript" data-eval>
          <script type="ace">
            var acecomp = document.querySelector('#editor-onchange');
            var output = document.querySelector('#onchange-output');
            var replace_content = document.querySelector('#replace_content');

            // Bind to the 'input' event
            acecomp.addEventListener('input', (e) => {
              // Extract content from editor
              output.value = e.target.getValue();
              console.log('📝 Content updated:', e.target.getValue().substring(0, 50) + '...');
            });

            // Set initial content
            output.value = acecomp.getValue();

            replace_content.addEventListener('click', () => {
              // Replace editor content programmatically
              // Notice: 'input' event will NOT fire (matches native textarea behavior)

              // You can use either syntax:
              // acecomp.setValue('new code');  // Method call
              // acecomp.value = 'new code';    // Property assignment (same as textarea.value = ...)

              acecomp.value = '// Content replaced programmatically!\nconsole.log("New content set.");\n\n// ❌ Notice: The right side did NOT update!\n// That\'s because acecomp.value = "..." does NOT trigger input event.\n// This matches native textarea behavior.';

              console.log('🔴 Setting acecomp.value programmatically - NO input event fired!');
            });
          </script>
        </ace-editor>
        <button id="replace_content">replace content</button>
      </div>
      <div>
        <h3>📤 Extracted Content (via 'input' event)</h3>
        <textarea id="onchange-output" readonly></textarea>
      </div>
    </div>

    <h2>Native Textarea Comparison</h2>

    <alert-box type="important">
      Native HTML elements (input, textarea) do NOT fire 'input' event when
      their value is set programmatically. Only user interaction triggers it.
    </alert-box>

    <div class="onchange-demo">
      <div>
        <h3>📝 Editable Textarea</h3>
        <textarea
          id="native-textarea"
          style="width: 100%; min-height: 200px; padding: 10px"
        >
// Edit this text and watch it appear on the right!
function greet(name) {
  console.log("Hello, " + name + "!");
}

greet("World");</textarea
        >
        <button id="replace_textarea_content">
          Replace Content (no 'input' event!)
        </button>
      </div>
      <div>
        <h3>📤 Extracted Content (via 'input' event)</h3>
        <textarea id="native-output" readonly></textarea>
      </div>
    </div>

    <script>
      // Native textarea demo
      const nativeTextarea = document.querySelector("#native-textarea");
      const nativeOutput = document.querySelector("#native-output");
      const replaceTextareaBtn = document.querySelector(
        "#replace_textarea_content"
      );

      // Bind to the 'input' event
      nativeTextarea.addEventListener("input", (e) => {
        // Extract content from textarea
        nativeOutput.value = e.target.value;
        console.log(
          "📝 Native textarea input event fired:",
          e.target.value.substring(0, 50) + "..."
        );
      });

      // Set initial content
      nativeOutput.value = nativeTextarea.value;

      // Button click - this will NOT trigger 'input' event
      replaceTextareaBtn.addEventListener("click", () => {
        console.log(
          "🔴 Setting textarea.value programmatically - NO input event will fire!"
        );
        nativeTextarea.value =
          '// Content replaced programmatically!\nconsole.log("New content set.");\n\n// ❌ Notice: The right side did NOT update!\n// That\'s because textarea.value = "..." does NOT trigger input event.';
      });
    </script>

    <h2>Advanced: Access Native Ace Editor with getEditor()</h2>
    <p>
      <strong>🔧 Direct Access:</strong> Use <code>.getEditor()</code> to access
      the native Ace Editor instance and use advanced features not exposed by
      our web component API.
    </p>

    <alert-box type="tip" alert="Alternative Approach - Global Event">
      You can also use the global
      <code>document.addEventListener("ace-onload", ...)</code> event (see
      <a href="#logs" style="color: #1976d2; font-weight: bold"
        >Event Log section</a
      >) to tweak each newly created ace-editor instance. This is particularly
      useful when you want to apply custom configurations to multiple editors.
    </alert-box>

    <alert-box type="tip">
      Add custom attributes or classes to individual
      <code>&lt;ace-editor&gt;</code> tags (e.g.,
      <code>data-custom="special"</code> or <code>class="my-editor"</code>),
      then in the <code>ace-onload</code> event handler, check
      <code>event.detail.component</code> to distinguish between editors and
      apply specific tweaks to each one.
    </alert-box>

    <div class="content-card">
      <h3 style="margin-top: 0">🔍 Advanced Features Demo</h3>

      <div
        style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        "
      >
        <div>
          <h4 style="margin: 0 0 10px 0">Search & Replace</h4>
          <div style="display: flex; flex-direction: column; gap: 8px">
            <input
              type="text"
              id="search-term"
              placeholder="Search for..."
              value="let"
              style="padding: 8px; border: 1px solid #ddd; border-radius: 4px"
            />
            <input
              type="text"
              id="replace-term"
              placeholder="Replace with..."
              value="const"
              style="padding: 8px; border: 1px solid #ddd; border-radius: 4px"
            />
            <div style="display: flex; gap: 8px">
              <button
                onclick="findNext()"
                style="
                  flex: 1;
                  padding: 8px;
                  background: #667eea;
                  color: white;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                "
              >
                Find Next
              </button>
              <button
                onclick="replaceNext()"
                style="
                  flex: 1;
                  padding: 8px;
                  background: #28a745;
                  color: white;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                "
              >
                Replace
              </button>
              <button
                onclick="replaceAll()"
                style="
                  flex: 1;
                  padding: 8px;
                  background: #dc3545;
                  color: white;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                "
              >
                Replace All
              </button>
            </div>
          </div>
        </div>

        <div>
          <h4 style="margin: 0 0 10px 0">Editor Controls</h4>
          <div style="display: flex; flex-direction: column; gap: 8px">
            <button
              onclick="toggleLineNumbers()"
              style="
                padding: 8px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
              "
            >
              Toggle Line Numbers
            </button>
            <button
              onclick="setFontSize()"
              style="
                padding: 8px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
              "
            >
              Increase Font Size
            </button>
            <button
              onclick="gotoLine()"
              style="
                padding: 8px;
                background: #667eea;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
              "
            >
              Go to Line 11 (findNext)
            </button>
            <button
              onclick="addMarker()"
              style="
                padding: 8px;
                background: #ff6b6b;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
              "
            >
              Highlight Lines 5-8 (getEditor)
            </button>
          </div>
        </div>
      </div>

      <ace-editor id="advanced-editor" lang="javascript" data-eval>
        <script type="ace">
          // Wrap in block scope to avoid variable conflicts with other editors
          {
            // This editor demonstrates getEditor() by setting up controls that operate on ITSELF!
            // The code below executes once via data-eval and sets up the interactive demo.

            const advancedEditor = document.querySelector('#advanced-editor');
            let currentFontSize = 14;
            let lineNumbersVisible = true;
            let highlightMarker = null;

            // Get the native Ace Editor instance - this is the key feature being demonstrated!
            const editor = advancedEditor.getEditor();

          // Find next occurrence in THIS editor
          window.findNext = () => {
            const searchTerm = document.getElementById('search-term').value;
            const resultsDiv = document.getElementById('search-results');

            if (!searchTerm) {
              resultsDiv.textContent = '⚠️ Please enter a search term';
              return;
            }

            editor.find(searchTerm, {
              backwards: false,
              wrap: true,
              caseSensitive: false,
              wholeWord: false,
              regExp: false
            });

            const selection = editor.getSelection();
            const range = selection.getRange();

            if (!range.isEmpty()) {
              resultsDiv.textContent = `✅ Found at line ${range.start.row + 1}, column ${range.start.column + 1}`;
            } else {
              resultsDiv.textContent = '❌ No matches found';
            }
          };

          // Replace next occurrence in THIS editor
          window.replaceNext = () => {
            const searchTerm = document.getElementById('search-term').value;
            const replaceTerm = document.getElementById('replace-term').value;
            const resultsDiv = document.getElementById('search-results');

            if (!searchTerm) {
              resultsDiv.textContent = '⚠️ Please enter a search term';
              return;
            }

            editor.find(searchTerm, {
              backwards: false,
              wrap: true,
              caseSensitive: false,
              wholeWord: false,
              regExp: false
            });

            const selection = editor.getSelection();
            const range = selection.getRange();

            if (!range.isEmpty()) {
              editor.replace(replaceTerm);
              resultsDiv.textContent = `✅ Replaced at line ${range.start.row + 1}`;
            } else {
              resultsDiv.textContent = '❌ No matches found to replace';
            }
          };

          // Replace all occurrences in THIS editor
          window.replaceAll = () => {
            const searchTerm = document.getElementById('search-term').value;
            const replaceTerm = document.getElementById('replace-term').value;
            const resultsDiv = document.getElementById('search-results');

            if (!searchTerm) {
              resultsDiv.textContent = '⚠️ Please enter a search term';
              return;
            }

            const count = editor.replaceAll(replaceTerm, {
              needle: searchTerm,
              caseSensitive: false,
              wholeWord: false,
              regExp: false
            });

            resultsDiv.textContent = `✅ Replaced ${count} occurrence(s)`;
          };

          // Toggle line numbers for THIS editor
          window.toggleLineNumbers = () => {
            lineNumbersVisible = !lineNumbersVisible;
            editor.renderer.setShowGutter(lineNumbersVisible);
            const resultsDiv = document.getElementById('search-results');
            resultsDiv.textContent = `✅ Line numbers ${lineNumbersVisible ? 'enabled' : 'disabled'}`;
          };

          // Increase font size of THIS editor
          window.setFontSize = () => {
            currentFontSize += 2;
            if (currentFontSize > 24) currentFontSize = 12; // Reset after max
            editor.setFontSize(currentFontSize);
            const resultsDiv = document.getElementById('search-results');
            resultsDiv.textContent = `✅ Font size set to ${currentFontSize}px`;
          };

          // Go to line 30 in THIS editor (where the find/replace functions start)
          window.gotoLine = () => {
            editor.gotoLine(11, 0, true);
            editor.focus();
            const resultsDiv = document.getElementById('search-results');
            resultsDiv.textContent = `✅ Jumped to line 30 (find function)`;
          };

          // Add marker to highlight lines 12-15 (the getEditor() call!)
          window.addMarker = () => {
            const Range = editor.getSelectionRange().constructor;
            const resultsDiv = document.getElementById('search-results');

            // Remove previous marker if exists
            if (highlightMarker !== null) {
              editor.session.removeMarker(highlightMarker);
              highlightMarker = null;
              resultsDiv.textContent = `✅ Highlight removed`;
              return;
            }

            // Highlight the getEditor() call (lines 12-14)
            const range = new Range(4, 0, 7, 0); // 0-indexed
            highlightMarker = editor.session.addMarker(range, "ace_selection", "fullLine");
            resultsDiv.textContent = `✅ Lines 5-7 highlighted (the getEditor() magic!)`;
          };

            console.log('✅ Advanced editor features initialized using getEditor()!');
            console.log('💡 Try: Search "let" and replace with "const", then click Replace All!');
          } // End of block scope
        </script>
      </ace-editor>

      <div
        id="search-results"
        style="
          margin-top: 15px;
          padding: 10px;
          background: #f8f9fa;
          border-radius: 4px;
          font-size: 14px;
          min-height: 30px;
        "
      >
        Ready to search...
      </div>
    </div>
  </body>
</html>
